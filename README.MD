## Project structure
<b>Project directory tree</b>
```
.
├── .env                                 # ENV file with configuration variables
├── __init__.py
├── pytest.ini                          # Tests configuration file
├── run_app.sh                          # Script for running API
├── run_tests.sh                        # Script for running tests
├── src
│   ├── core                            # Business logic
│   │   ├── managers                    # External managers
│   │   │   ├── __init__.py
│   │   │   └── s3_downloader.py
│   │   ├── ml                          # Machine Learning models
│   │   │   ├── classifier_files.py
│   │   │   ├── classifier_model.py
│   │   │   └── __init__.py
│   │   ├── schemas                     # API schemas
│   │   │   ├── __init__.py
│   │   │   └── predictions.py
│   │   ├── server.py                   # FastAPI server configuration
│   │   ├── services                    # API services
│   │   │   ├── __init__.py
│   │   │   └── predictions_service.py
│   │   ├── settings.py                 # Pydantic-based App configuration settings
│   │   ├── app_container.py            # App container for managing dependencies (dependency injection)
│   │   └── __init__.py
│   ├── __init__.py
│   ├── main.py                         # Entrypoint
│   └── v1                              # API V1
│       ├── endpoints
│       │   ├── healthcheck.py
│       │   ├── __init__.py
│       │   └── predictions.py
│       ├── __init__.py
│       └── router.py
└── tests
    ├── assets
    │   ├── healthy.jpg
    │   └── healthy_preprocessed.npy
    ├── conftest.py
    ├── managers
    │   ├── __init__.py
    │   └── test_s3_downloader.py
    ├── ml
    │   ├── __init__.py
    │   └── test_classifier_model.py
    ├── schemas
    │   ├── __init__.py
    │   └── test_predictions.py
    ├── services
    │   ├── __init__.py
    │   └── test_predictions_service.py
    └── v1
        └── test_predictions.py
```


### Example of layered architecture:

- Top layer: `api.v1.endpoints.predictions`
- Second layer: `api.src.core.services.predictions_service` 
- Third layer: `api.src.core.ml.classifier_model`

Code is splitted and each layer is characterised by different level of abstraction, where first layer is the most abstract (check the logic for the file representing this layer in the example), and the last layer (example of classifier model) actually contains keras model and manage it (load/unload/make a prediction/pre&post-process data) - of course we're using DL library, but this is just another level that we're not aware of, apart from the interface that it provides.

### Extending this project
You may want to use this as a template. You can easily extend this app with:
- SQL/no-SQL DataBase
- Add authorization
- Add new external services interface, like AWS S3 Manager. 

## Resources
- [FastAPI](https://fastapi.tiangolo.com/) - fast, simple web framework for building API's, with autogenerated OpenAPI documentation, based on Pydantic models
- [Dependency injector for Python](https://python-dependency-injector.ets-labs.org/introduction/index.html) - framework implementing dependency injection principle
- [Pydantic](https://pydantic-docs.helpmanual.io/) - data validation, settings management, type annotations
- [Keras](https://keras.io/) - simple, high-level API for Tensorflow Deep Learning library
